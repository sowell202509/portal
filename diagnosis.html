<!DOCTYPE html>
<html lang="ja">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SXB69DFE11"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-SXB69DFE11');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯’èˆŒäº”è¡Œè¨ºæ–­ | ã»ãã—ã‚„æœ¨ç”°</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Reggae+One&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <style>
        /* =========================================
           ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³CSS (ã‚¿ãƒƒãƒ—ç—•è·¡å¯¾ç­–æ¸ˆã¿)
           ========================================= */
        body {
            background-color: #111;
            color: #f0f0f0;
            font-family: "Helvetica Neue", Arial, sans-serif;
            margin: 0; padding: 0;
            display: flex; justify-content: center; min-height: 100vh;
        }

        .container {
            width: 100%; max-width: 480px; padding: 20px;
            box-sizing: border-box;
        }

        h1.app-title {
            font-family: 'Reggae One', cursive; text-align: center;
            color: #c9a063; text-shadow: 2px 2px 4px #000; margin-bottom: 20px;
        }

        /* æ¯’èˆŒè­¦å‘Šãƒœãƒƒã‚¯ã‚¹ */
        .warning-box {
            background: repeating-linear-gradient(45deg, #2a0a0a, #2a0a0a 10px, #3a1a1a 10px, #3a1a1a 20px);
            border: 2px solid #ff4500; border-radius: 8px; padding: 20px; margin-bottom: 25px;
            text-align: center; box-shadow: 0 0 15px rgba(255, 69, 0, 0.3); animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 10px rgba(255, 69, 0, 0.3); }
            50% { box-shadow: 0 0 20px rgba(255, 69, 0, 0.6); }
            100% { box-shadow: 0 0 10px rgba(255, 69, 0, 0.3); }
        }
        .warning-title { color: #ff4500; font-weight: bold; font-size: 1.2rem; margin-bottom: 10px; }
        .warning-text { color: #ffcccc; font-size: 0.9rem; line-height: 1.6; text-align: left; }

        /* ç”»é¢åˆ‡ã‚Šæ›¿ãˆã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .screen { display: none; }
        .active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- SCENE 1: é™°é™½é¸æŠ --- */
        .yin-yang-btn {
            display: flex; align-items: center; justify-content: flex-start;
            background: #222; border: 2px solid #555; border-radius: 10px;
            padding: 15px; margin-bottom: 15px; cursor: pointer; transition: 0.1s; /* åå¿œé€Ÿåº¦ã‚¢ãƒƒãƒ— */
            box-sizing: border-box; overflow: hidden; position: relative;
            /* ã‚¹ãƒãƒ›ã§ã®ã‚¿ãƒƒãƒ—æ™‚ã®é’ã„èƒŒæ™¯ã‚’æ¶ˆã™ */
            -webkit-tap-highlight-color: transparent; 
        }
        /* PCã®ã¿ãƒ›ãƒãƒ¼åŠ¹æœã‚’é©ç”¨ï¼ˆã‚¹ãƒãƒ›ã§ã¯ç„¡åŠ¹åŒ–ï¼‰ */
        @media (hover: hover) {
            .yin-yang-btn:hover { border-color: #c9a063; background: #2a2a2a; }
        }
        .yin-yang-btn:active { transform: scale(0.98); background: #333; }
        
        .yy-img-box {
            width: 80px; height: 80px; border-radius: 8px; overflow: hidden;
            border: 2px solid #444; margin-right: 20px; flex-shrink: 0;
        }
        .yy-img-box img { width: 100%; height: 100%; object-fit: cover; }
        .yy-info { display: flex; align-items: center; }
        .yy-info h3 { margin: 0; color: #fff; font-size: 1.5rem; letter-spacing: 2px; }

        /* --- SCENE 2: è³ªå•ã‚«ãƒ¼ãƒ‰ --- */
        .progress-container {
            width: 100%; background: #333; height: 6px; border-radius: 3px;
            margin-bottom: 20px; overflow: hidden;
        }
        .progress-bar { height: 100%; background: #c9a063; width: 0%; transition: width 0.3s; }

        .question-card {
            background: #1a1a1a; border: 1px solid #444; border-radius: 10px;
            padding: 20px; margin-bottom: 20px; box-sizing: border-box;
        }
        .q-header { display: flex; justify-content: space-between; color: #c9a063; font-weight: bold; margin-bottom: 15px; }
        .q-text { 
            font-size: 1.15rem; line-height: 1.6; font-weight: bold; margin-bottom: 25px;
            border-bottom: 1px solid #444; padding-bottom: 15px;
        }
        
        .options-grid { display: flex; flex-direction: column; gap: 10px; }
        
        /* â˜…ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆï¼šãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .option-btn {
            width: 100%; box-sizing: border-box; padding: 15px;
            background: #333; color: #e0e0e0; border: 1px solid #555;
            border-radius: 8px; font-size: 1rem; cursor: pointer; text-align: left;
            transition: 0.1s; position: relative; line-height: 1.4;
            /* ã‚¹ãƒãƒ›ã‚¿ãƒƒãƒ—æ™‚ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’æ¶ˆã™ */
            -webkit-tap-highlight-color: transparent;
            outline: none; /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ ã‚‚æ¶ˆã™ */
        }

        /* PCï¼ˆãƒã‚¦ã‚¹æ“ä½œï¼‰ã®æ™‚ã ã‘ãƒ›ãƒãƒ¼è‰²ã‚’å¤‰ãˆã‚‹ */
        @media (hover: hover) {
            .option-btn:hover { background: #c9a063; color: #000; border-color: #c9a063; transform: scale(1.02); }
        }

        /* ã‚¹ãƒãƒ›ã‚‚PCã‚‚ã€æŠ¼ã—ãŸç¬é–“ã ã‘å¤‰åŒ–ã•ã›ã‚‹ */
        .option-btn:active { 
            background: #c9a063; color: #000; border-color: #c9a063; 
            transform: scale(0.98); 
        }

        /* --- SCENE 3: çµæœã‚«ãƒ¼ãƒ‰ (RPGé¢¨) --- */
        .rpg-card {
            font-family: 'Reggae One', cursive; background: #1a1a1a;
            border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.9);
            text-align: center; overflow: hidden; margin-bottom: 20px;
            width: 100%; box-sizing: border-box;
        }
        .card-border {
            border: 3px solid #c9a063; border-radius: 10px; padding: 15px;
            background: linear-gradient(180deg, #2c2222 0%, #1a1a1a 100%);
        }
        .card-header { color: #ffd700; font-weight: bold; margin-bottom: 10px; }
        .card-image-box {
            width: 100%; border: 2px solid #5a3a3a; border-radius: 6px;
            overflow: hidden; background: #000; margin-bottom: 15px;
        }
        .card-image-box img { width: 100%; height: auto; display: block; filter: contrast(1.1) brightness(1.1); }
        
        .card-title {
            font-size: 1.3rem; background: linear-gradient(45deg, #ff4500, #ff8c00);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin: 5px 0 15px; border-bottom: 1px solid #5a3a3a; padding-bottom: 10px;
        }
        .card-desc {
            font-size: 1rem; line-height: 1.8; text-align: justify;
            background: rgba(0,0,0,0.3); padding: 10px; border-radius: 5px;
            color: #e0e0e0; margin-bottom: 15px;
        }
        .card-footer {
            background: #332222; padding: 12px; border-radius: 6px; border: 1px solid #5a3a3a;
        }
        .footer-label { display: block; color: #ff7f50; font-size: 0.8rem; margin-bottom: 5px; }
        #card-lucky-item { font-weight: bold; }

        /* --- SNS & ä¿å­˜ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ --- */
        .share-area {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px;
        }
        .btn-threads {
            grid-column: span 2; background: #000; color: #fff; border: 1px solid #333;
            padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            text-decoration: none; font-size: 1.1rem; -webkit-tap-highlight-color: transparent;
        }
        .btn-sns {
            padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer;
            text-align: center; text-decoration: none; font-size: 0.9rem;
            display: flex; align-items: center; justify-content: center; gap: 5px;
            border: none; -webkit-tap-highlight-color: transparent;
        }
        .btn-save { background: linear-gradient(45deg, #405de6, #5851db, #833ab4, #c13584, #e1306c, #fd1d1d); color: #fff; }
        .btn-copy { background: #555; color: #fff; }
        .btn-x { background: #000; color: #fff; border: 1px solid #333; }
        
        .btn-threads:active, .btn-sns:active { transform: scale(0.95); opacity: 0.8; }

        /* è©³ç´° & äºˆç´„ãƒœã‚¿ãƒ³ */
        .detail-btn {
            width: 100%; box-sizing: border-box; padding: 15px;
            background: #444; color: #fff; border: 1px solid #888;
            border-radius: 8px; font-size: 1rem; cursor: pointer; margin-top: 10px;
            -webkit-tap-highlight-color: transparent;
        }
        .detail-btn:active { background: #666; transform: scale(0.98); }

        #detail-area {
            margin-top: 30px; padding: 20px; background: #222;
            border-radius: 10px; box-sizing: border-box; width: 100%;
        }
        #chart-comment {
            text-align: justify; font-size: 0.95rem; color: #e0e0e0;
            background: #332222; padding: 15px; border-radius: 8px;
            border: 1px solid #5a3a3a; margin-top: 20px; line-height: 1.6;
        }
        #chart-comment strong { color: #ff4500; }

        .reserve-btn {
            display: block; width: 100%; box-sizing: border-box; padding: 15px;
            background: #00C300; color: #fff; text-align: center; text-decoration: none;
            font-weight: bold; border-radius: 8px; margin-top: 20px;
            font-size: 1.1rem; box-shadow: 0 4px 0 #008f00; transition: 0.1s;
            -webkit-tap-highlight-color: transparent;
        }
        .reserve-btn:active { transform: translateY(4px); box-shadow: none; }

        /* ãƒãƒ¼ã‚¿ãƒ«ã¸æˆ»ã‚‹ */
        .back-link { text-align: center; margin-top: 40px; margin-bottom: 20px; }
        .back-link a {
            color: #888; text-decoration: none; font-size: 0.9rem;
            border-bottom: 1px solid #555; padding-bottom: 2px;
        }
        .back-link a:hover { color: #c9a063; border-color: #c9a063; }
    </style>
</head>
<body>

<div class="container">
    <h1 class="app-title">æ¯’èˆŒäº”è¡Œè¨ºæ–­</h1>

    <div id="scene-start" class="screen active">
        <div class="warning-box">
            <div class="warning-title">â˜ ï¸ å‰¯ä½œç”¨ã®è­¦å‘Š</div>
            <div class="warning-text">
                ã“ã®è¨ºæ–­ã¯ã€ã‚ãªãŸã®å¿ƒèº«ã®ãƒãƒ©ãƒ³ã‚¹å´©å£Šã‚’<strong>ã€Œæ¥µã‚ã¦æ¯’èˆŒã€</strong>ã«æŒ‡æ‘˜ã—ã¾ã™ã€‚<br>
                ã€Œã‚·ãƒ§ãƒƒã‚¯ã€ã€Œå‹•æ‚¸ã€ã€Œã‚¤ãƒ©ç«‹ã¡ã€ç­‰ã®å‰¯ä½œç”¨ãŒå‡ºã¦ã‚‚ã€å½“æ–¹ã¯ä¸€åˆ‡è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚<br>
                ãã‚Œã§ã‚‚<strong>ã€ŒçœŸå®Ÿã€</strong>ã‚’çŸ¥ã‚‹è¦šæ‚ŸãŒã‚ã‚‹è€…ã ã‘ã€ä¸‹ã¸é€²ã‚ã€‚
            </div>
        </div>

        <p style="text-align: center; color: #aaa; margin-bottom: 20px; font-weight: bold; line-height: 1.8;">
            ç†å±ˆã¯æ¨ã¦ã‚ã€‚<br>
            <span style="color: #c9a063; font-size: 1.2rem;">ç›´æ„Ÿã ã‘</span>ã§ã€é­‚ã®å±æ€§ã‚’é¸ã¹ã€‚
        </p>
        
        <div class="yin-yang-btn" onclick="startGame('yang')">
            <div class="yy-img-box">
                <img src="img/yang_button.png" alt="é™½ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼">
            </div>
            <div class="yy-info"><h3>é™½ (YANG)</h3></div>
        </div>

        <div class="yin-yang-btn" onclick="startGame('yin')">
            <div class="yy-img-box">
                <img src="img/yin_button.png" alt="é™°ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼">
            </div>
            <div class="yy-info"><h3>é™° (YIN)</h3></div>
        </div>

        <div class="back-link"><a href="index.html">â† ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆã«æˆ»ã‚‹</a></div>
    </div>

    <div id="scene-quiz" class="screen">
        <div class="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
        <div class="question-card">
            <div class="q-header">
                <span>SCENE</span>
                <span><span id="q-num">1</span> / <span id="q-total"></span></span>
            </div>
            <div id="q-text" class="q-text"></div>
            <div id="options-area" class="options-grid"></div>
        </div>
    </div>

    <div id="scene-result" class="screen">
        <div id="capture-target" class="rpg-card">
            <div class="card-border">
                <div class="card-header" id="card-rarity">ã€SSRã€‘</div>
                <div class="card-image-box">
                    <img id="card-char-img" src="" alt="Character">
                </div>
                <h3 id="card-title" class="card-title">ç§°å·</h3>
                <div id="card-desc" class="card-desc">è¨ºæ–­çµæœ</div>
                <div class="card-footer">
                    <span class="footer-label">ğŸ›¡ï¸ æŠ•ã’ã‚„ã‚Šå‡¦æ–¹ç®‹ï¼š</span>
                    <span id="card-lucky-item">ã‚¢ã‚¤ãƒ†ãƒ </span>
                </div>
            </div>
        </div>

        <div class="share-area">
            <button class="btn-threads" onclick="shareThreads()">
                <span>@</span> Threadsã§çµæœã‚’ã‚·ã‚§ã‚¢
            </button>
            <button class="btn-sns btn-save" onclick="saveCardImage()">
                ğŸ“¸ ç”»åƒä¿å­˜<br><span style="font-size:0.7rem">(ã‚¤ãƒ³ã‚¹ã‚¿ç”¨)</span>
            </button>
            <button class="btn-sns btn-copy" onclick="copyLink()">
                ğŸ”— ãƒªãƒ³ã‚¯<br>ã‚³ãƒ”ãƒ¼
            </button>
            <button class="btn-sns btn-x" onclick="shareX()">
                ğ• ã§<br>ã‚·ã‚§ã‚¢
            </button>
        </div>

        <button id="show-detail-btn" class="detail-btn" onclick="showChart()">
            ğŸ“Š ãªãœãƒãƒ¬ãŸï¼Ÿåˆ†æãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚‹
        </button>

        <div id="detail-area" style="display: none;">
            <h3 style="text-align:center; color:#c9a063;">äº”è¡Œãƒãƒ©ãƒ³ã‚¹åˆ†æ</h3>
            <div class="chart-container" style="position: relative; height: 300px; width: 100%;">
                <canvas id="radarChart"></canvas>
            </div>
            <p id="chart-comment"></p>
            <a href="https://line.me/R/ti/p/@hogushiya_kida" class="reserve-btn" target="_blank">
                Sowellã§é¤Šç”Ÿã™ã‚‹ï¼ˆäºˆç´„ï¼‰
            </a>
            <button class="detail-btn" onclick="location.reload()" style="margin-top:15px; background:#333;">
                ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹
            </button>
        </div>

        <div class="back-link"><a href="index.html">â† ãƒãƒ¼ã‚¿ãƒ«ã‚µã‚¤ãƒˆã«æˆ»ã‚‹</a></div>
    </div>
</div>

<script>
/* =========================================
   ğŸ§  ãƒ­ã‚¸ãƒƒã‚¯ (10å•ãƒ»ã‚·ã‚§ã‚¢ãƒ»GA4å¯¾å¿œ)
   ========================================= */

let userYinYang = 'yang';
let currentQIndex = 0;
let scores = { wood: 0, fire: 0, earth: 0, metal: 0, water: 0 };
let finalResultType = 'wood';
let subResultType = null;

const questions = [
    { text: "æ¸‹æ»ã‚„ãƒ¬ã‚¸å¾…ã¡ã§ã‚¤ãƒ©ã‚¤ãƒ©â€¦<br>ãã®æ™‚ã€å¿ƒã®ä¸­ã§ã©ã†æ€ã£ã¦ã‚‹ï¼Ÿ", options: [{ type: 'wood', label: "ã€Œãƒãƒƒã€æ—©ãå‹•ã‘ã‚ˆã€ã¨èˆŒæ‰“ã¡ã—ãã†ã«ãªã‚‹" }, { type: 'fire', label: "ã€Œæš‡ã ã—ã‚¹ãƒãƒ›è¦‹ã‚‹ã‹ï¼ã€ã¨SNSã‚’é–‹ã" }, { type: 'earth', label: "ã€Œã¾ã‚ã„ã„ã‹ã€ã¨æŒã£ã¦ãŸãŠè“å­ã‚’é£Ÿã¹å§‹ã‚ã‚‹" }, { type: 'metal', label: "ã€Œäºˆå®šã‚ˆã‚Š3åˆ†é…ã‚Œã‚‹â€¦ã€ã¨æ™‚é–“ã‚’è¨ˆç®—ã™ã‚‹" }, { type: 'water', label: "ã€Œãƒˆã‚¤ãƒ¬è¡ŒããŸããªã£ãŸã‚‰ã©ã†ã—ã‚ˆã†ã€ã¨ä¸å®‰ã«ãªã‚‹" }] },
    { text: "æ–°ã—ã„ä»•äº‹ã‚’ä»»ã•ã‚ŒãŸã¨ãã€<br>æœ€åˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ï¼Ÿ", options: [{ type: 'wood', label: "ã€Œã‚ˆã—ã€ã‚„ã£ã¦ã‚„ã‚‹ï¼ã€ã¨å³åº§ã«å‹•ãå‡ºã™" }, { type: 'fire', label: "ã€Œé¢ç™½ãã†ï¼ã€ã¨å‘¨ã‚Šã«è¨€ã„ãµã‚‰ã—ã¦ç››ã‚Šä¸ŠãŒã‚‹" }, { type: 'earth', label: "ã€Œãˆãƒ¼ã€ã‚ã‚“ã©ãã•ã„ãªâ€¦ã€ã¨ä¸€æ—¦ä¼‘æ†©ã™ã‚‹" }, { type: 'metal', label: "ã€Œãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã¯ï¼Ÿæ‰‹é †ã¯ï¼Ÿã€ã¨è©³ç´°ã‚’ç¢ºèªã™ã‚‹" }, { type: 'water', label: "ã€Œå¤±æ•—ã—ãŸã‚‰ã©ã†ã—ã‚ˆã†ã€ã¨ãƒªã‚¹ã‚¯ã‚’è€ƒãˆã‚‹" }] },
    { text: "ä¼‘æ—¥ã®éã”ã—æ–¹ã€<br>ç†æƒ³ã«è¿‘ã„ã®ã¯ã©ã‚Œï¼Ÿ", options: [{ type: 'wood', label: "ã‚¹ãƒãƒ¼ãƒ„ã‚„ã‚¸ãƒ ã§ä½“ã‚’å‹•ã‹ã—ã¦ç™ºæ•£ï¼" }, { type: 'fire', label: "ã‚¤ãƒ™ãƒ³ãƒˆã‚„é£²ã¿ä¼šã§å¤§é¨’ãï¼" }, { type: 'earth', label: "å®¶ã§ã‚´ãƒ­ã‚´ãƒ­ã—ãªãŒã‚‰å‹•ç”»ã¨ãƒãƒ†ãƒ" }, { type: 'metal', label: "éƒ¨å±‹ã®æƒé™¤ã‚„æ–­æ¨é›¢ã§å®Œç’§ã«æ•´ãˆã‚‹" }, { type: 'water', label: "ä¸€äººã§é™ã‹ã«èª­æ›¸ã‚„æ˜ ç”»é‘‘è³" }] },
    { text: "å‹é”ã¨ã®ä¼šè©±ä¸­ã€<br>ã‚ˆãã‚„ã£ã¦ã—ã¾ã†ã“ã¨ã¯ï¼Ÿ", options: [{ type: 'wood', label: "ã¤ã„ç†±ããªã£ã¦è‡ªåˆ†ã®æ„è¦‹ã‚’æŠ¼ã—é€šã™" }, { type: 'fire', label: "ç¬‘ã„ã™ãã¦ä½•ã®è©±ã‚’ã—ã¦ãŸã‹å¿˜ã‚Œã‚‹" }, { type: 'earth', label: "ã€Œã¸ãƒ¼ã€ã€Œãã†ã ã­ã€ã¨èãæµã—ã¦åˆ¥ã®äº‹è€ƒãˆã‚‹" }, { type: 'metal', label: "ç›¸æ‰‹ã®è¨€è‘‰ã®é–“é•ã„ã‚„çŸ›ç›¾ã‚’æŒ‡æ‘˜ã—ã¡ã‚ƒã†" }, { type: 'water', label: "æ„›æƒ³ç¬‘ã„ã‚’ã—ã¦æœ¬éŸ³ã¯è¨€ã‚ãªã„" }] },
    { text: "ä½“èª¿ãŒæ‚ªããªã‚‹ã¨ã€<br>æœ€åˆã«å‡ºã‚„ã™ã„ç—‡çŠ¶ã¯ï¼Ÿ", options: [{ type: 'wood', label: "ç›®ãŒç–²ã‚Œã‚‹ã€è‚©ãŒã‚¬ãƒã‚¬ãƒã«ãªã‚‹" }, { type: 'fire', label: "å‹•æ‚¸ãŒã™ã‚‹ã€çœ ã‚Œãªããªã‚‹" }, { type: 'earth', label: "èƒƒã‚‚ãŸã‚Œã™ã‚‹ã€å£å†…ç‚ãŒã§ãã‚‹" }, { type: 'metal', label: "å–‰ãŒç—›ããªã‚‹ã€å’³ãŒå‡ºã‚‹ã€è‚ŒãŒè’ã‚Œã‚‹" }, { type: 'water', label: "è¶³è…°ãŒå†·ãˆã‚‹ã€ãƒˆã‚¤ãƒ¬ãŒè¿‘ããªã‚‹" }] },
    { text: "ç†ä¸å°½ãªä¸Šå¸ã‚„å®¢ã«çµ¡ã¾ã‚ŒãŸï¼<br>ã‚ãªãŸã®è„³å†…åå¿œã¯ï¼Ÿ", options: [{ type: 'wood', label: "ã€Œã¯ï¼Ÿã€ã¨é¡”ã«å‡ºã¦ã—ã¾ã„ã€åè«–ã—ãŸããªã‚‹" }, { type: 'fire', label: "ã€Œä¿¡ã˜ã‚‰ã‚“ãªã„ï¼ã€ã¨å¾Œã§åŒåƒšã«å–‹ã‚Šæ•£ã‚‰ã™" }, { type: 'earth', label: "ã€Œç§ãŒæ‚ªã„ã®ã‹ãªâ€¦ã€ã¨ä¸€äººã§æŠ±ãˆè¾¼ã‚“ã§è½ã¡è¾¼ã‚€" }, { type: 'metal', label: "ã€Œè¦å®šã§ã¯ã“ã†ã§ã™ã€ã¨å†·é™ã«è«–ç ´ã™ã‚‹" }, { type: 'water', label: "æ€–ãã¦ä½•ã‚‚è¨€ãˆãšã€æ„›æƒ³ç¬‘ã„ã§ã‚„ã‚Šéã”ã™" }] },
    { text: "è‡¨æ™‚åå…¥ã§10ä¸‡å††å…¥ã£ãŸï¼<br>ã©ã†ä½¿ã†ï¼Ÿ", options: [{ type: 'wood', label: "æ¬²ã—ã‹ã£ãŸãƒ–ãƒ©ãƒ³ãƒ‰ç‰©ã‚„æ©Ÿæã‚’å³æ±ºã§è²·ã†" }, { type: 'fire', label: "å‹é”ã¨é£²ã¿ã«è¡Œã£ãŸã‚Šã€ãƒ‘ãƒ¼ãƒƒã¨æ´¾æ‰‹ã«ä½¿ã†" }, { type: 'earth', label: "ç¾å‘³ã—ã„ã‚‚ã®ã‚’é£Ÿã¹ã«è¡Œãã‹ã€ã¨ã‚Šã‚ãˆãšè²¯é‡‘" }, { type: 'metal', label: "ä»¥å‰ã‹ã‚‰è¨ˆç”»ã—ã¦ã„ãŸå¿…è¦ãªè¨­å‚™æŠ•è³‡ã«å›ã™" }, { type: 'water', label: "ä½•ãŒã‚ã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã‹ã‚‰ã€å…¨é¡ã‚¿ãƒ³ã‚¹é é‡‘" }] },
    { text: "éƒ¨å±‹ã®ç‰‡ä»˜ã‘ã€<br>ã‚ãªãŸã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯ï¼Ÿ", options: [{ type: 'wood', label: "ã‚„ã‚‹ã¨ãªã£ãŸã‚‰å¾¹åº•çš„ã«æ¨ã¦ã¾ãã‚‹ï¼ˆå‹¢ã„é‡è¦–ï¼‰" }, { type: 'fire', label: "æ‡ã‹ã—ã„å†™çœŸã‚’è¦‹ã¤ã‘ã¦ä½œæ¥­ãŒæ­¢ã¾ã‚‹ï¼ˆè„±ç·šï¼‰" }, { type: 'earth', label: "ã€Œã„ã¤ã‹ä½¿ã†ã‹ã‚‚ã€ã¨ç‰©ãŒæ¨ã¦ã‚‰ã‚Œãªã„ï¼ˆæºœã‚è¾¼ã¿ï¼‰" }, { type: 'metal', label: "æœ¬ã®é«˜ã•ã‚„æœã®å‘ãã¾ã§å®Œç’§ã«æƒãˆã‚‹ï¼ˆå‡ å¸³é¢ï¼‰" }, { type: 'water', label: "ãã‚‚ãã‚‚å‹•ããŸããªã„ã€ã‚³ã‚¿ãƒ„ã‹ã‚‰å‡ºãªã„ï¼ˆåœæ»ï¼‰" }] },
    { text: "ã‚«ãƒ•ã‚§ã§æ³¨æ–‡ã—ãŸæ–™ç†ãŒå…¨ç„¶æ¥ãªã„â€¦<br>ã©ã†ã™ã‚‹ï¼Ÿ", options: [{ type: 'wood', label: "åº—å“¡ã‚’å‘¼ã‚“ã§ã€Œã¾ã ã§ã™ã‹ï¼Ÿã€ã¨å•ã„è©°ã‚ã‚‹" }, { type: 'fire', label: "ã€Œå¿˜ã‚Œã‚‰ã‚Œã¦ã‚‹ï¼Ÿã€ã¨ã‚½ãƒ¯ã‚½ãƒ¯ã—ã¦ã‚­ãƒ§ãƒ­ã‚­ãƒ§ãƒ­ã™ã‚‹" }, { type: 'earth', label: "è¨€ã„å‡ºã›ãªãã¦ã€ã²ãŸã™ã‚‰ãŠè…¹ã‚’ç©ºã‹ã›ã¦å¾…ã¤" }, { type: 'metal', label: "æ™‚è¨ˆã‚’è¦‹ã¦ã€Œ20åˆ†çµŒéã—ã¾ã—ãŸã­ã€ã¨äº‹å®Ÿã‚’ä¼ãˆã‚‹" }, { type: 'water', label: "ã€Œç§ã®æ³¨æ–‡ã ã‘é€šã£ã¦ãªã„ã‹ã‚‚â€¦ã€ã¨è¢«å®³å¦„æƒ³ã™ã‚‹" }] },
    { text: "å¯ã‚‹å‰ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã€<br>ä¸€ç•ªè¿‘ã„ã®ã¯ï¼Ÿ", options: [{ type: 'wood', label: "æ˜æ—¥ã®ToDoã‚’ç¢ºèªã—ã¦ã€æˆ¦é—˜æ…‹å‹¢ã§å¯ã‚‹" }, { type: 'fire', label: "ã‚¹ãƒãƒ›ã‚’è¦‹ã™ãã¦ã€æ°—ã¥ã‘ã°æ·±å¤œ2æ™‚" }, { type: 'earth', label: "ä»Šæ—¥ã‚ã£ãŸã“ã¨ã‚’æ€ã„å‡ºã—ã¦ã€ä¸€äººåçœä¼šãŒå§‹ã¾ã‚‹" }, { type: 'metal', label: "ã‚¢ãƒ­ãƒã‚„æ¹¿åº¦ç®¡ç†ãªã©ã€å®Œç’§ãªç’°å¢ƒã‚’æ•´ãˆã‚‹" }, { type: 'water', label: "ãƒˆã‚¤ãƒ¬ã«è¡Œã£ãŸã‚Šæˆ¸ç· ã¾ã‚Šã‚’ç¢ºèªã—ãŸã‚Šã€è½ã¡ç€ã‹ãªã„" }] }
];

const resultData = {
    wood: {
        desc: "ãŠå‰ã€è‡ªåˆ†ãŒæœ‰èƒ½ã ã¨æ€ã£ã¦ã‚‹ã ã‚ï¼Ÿ å‘¨ã‚Šã¯ã€åœ§ãŒå¼·ã™ãã¦ã‚¦ã‚¶ã„ã€ã¨ã—ã‹æ€ã£ã¦ã­ã‡ã‚ˆã€‚çœ‰é–“ã®ã‚·ãƒ¯ã«æŒŸã¾ã£ãŸãã®ãƒ—ãƒ©ã‚¤ãƒ‰ã€ã•ã£ã•ã¨æ¨ã¦ãªã€‚è‚è‡“ãŒç„¼ãåˆ‡ã‚Œã¦ã€ãŸã ã®æ¯ã‚Œæœ¨ã«ãªã‚‹å‰ã«ã€‚",
        item: "é…¸ã£ã±ã„ã‚‚ã‚“ã‹ã˜ã£ã¦ã€ã•ã£ã•ã¨å¯ã‚ã€‚",
        yang: { title: "ğŸ˜¡ é™½æœ¨ã®æš´å›ï¼šã‚¤ã‚­ã‚Šæ•£ã‚‰ã‹ã—ã®å¤§æ¨¹", img: "img/wood_yang.png" },
        yin:  { title: "ğŸ¥€ é™°æœ¨ã®ãƒ¡ãƒ³ãƒ˜ãƒ©ï¼šçµ¡ã¿ã¤ããƒ„ã‚¿æ¤ç‰©", img: "img/wood_yin.png" },
        chartComment: "ã‚°ãƒ©ãƒ•ã‚’è¦‹ã‚ã€‚ã€Œæœ¨ï¼ˆè‚ï¼‰ã€ãŒçªãæŠœã‘ã¦ã‚‹ã ã‚ï¼Ÿ ã“ã‚Œã¯<strong>ã€Œæ€’ã‚Šã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã€ãŒæš´èµ°ã—ã¦ã‚‹è¨¼æ‹ </strong>ã ã€‚ãŠå‰ã®ãã®ã‚¤ãƒ©ã‚¤ãƒ©ãŒã€ç­‹è‚‰ã‚’ç¡¬ç›´ã•ã›ã€ç›®ã‚’ç–²ã‚Œã•ã›ã¦ã‚‹ã‚“ã ã‚ˆã€‚è‡ªæ¥­è‡ªå¾—ã ãªã€‚",
        subDesc: "ã•ã‚‰ã«å„ä»‹ãªã®ã¯ã€ãŠå‰ã®ä¸­ã«æ½œã‚€<strong>ã€æœ¨ï¼ˆæ€’ã‚Šï¼‰ã€</strong>ã®æ°—è³ªã ã€‚æ™®æ®µéš ã—ã¦ã‚‹ã¤ã‚‚ã‚Šã‹ã‚‚ã—ã‚Œãªã„ãŒã€ãµã¨ã—ãŸç¬é–“ã«ä¸æ©Ÿå«Œã‚ªãƒ¼ãƒ©ãŒæ¼ã‚Œå‡ºã¦ã‚‹ãã€‚"
    },
    fire: {
        desc: "æ¥½ã—ãã†ãªãƒ•ãƒªã—ã¦ã‚“ã®ãƒãƒ¬ãƒãƒ¬ãªã‚“ã ã‚ˆã€‚å¿ƒã®ç©´ã‚’ã€ã„ã„ã­ï¼ã€ã§åŸ‹ã‚ã‚ˆã†ã¨ã™ã‚‹ãªã€è™šã—ããªã‚‹ã ã‘ã ã‚ã€‚ãŠå‰ã®ãã®ãƒã‚¤ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã€è¦‹ã¦ã‚‹ã“ã£ã¡ãŒæ¯åˆ‡ã‚Œã™ã‚‹ã‚ã€‚ä¸­èº«ã‚¹ã‚«ã‚¹ã‚«ã®é¢¨èˆ¹ã‹ã‚ˆã€‚",
        item: "ã‚¹ãƒãƒ›é›»æºåˆ‡ã£ã¦ã€è‹¦ã„ã‚³ãƒ¼ãƒ’ãƒ¼é£²ã‚ã€‚",
        yang: { title: "ğŸ¤¬ é™½ç«ã®çˆ†å¼¾ï¼šåˆ¶å¾¡ä¸èƒ½ã®æ ¸èåˆç‚‰", img: "img/fire_yang.png" },
        yin:  { title: "ğŸ•¯ï¸ é™°ç«ã®æ€¨å¿µï¼šå‘ªã„ã®ç‚", img: "img/fire_yin.png" },
        chartComment: "ã€Œç«ï¼ˆå¿ƒï¼‰ã€ã®æ•°å€¤ãŒç•°å¸¸ã ãªã€‚ãŠå‰ã¯å¸¸ã«ã‚¢ã‚¯ã‚»ãƒ«å…¨é–‹ã®ã‚¹ãƒãƒ¼ãƒ„ã‚«ãƒ¼ã ã€‚<strong>ãƒ–ãƒ¬ãƒ¼ã‚­ï¼ˆæ°´ï¼‰ãŒå£Šã‚Œã¦ã‚‹</strong>ã‹ã‚‰ã€ã„ã¤ã‹å£ã«æ¿€çªã—ã¦ç‡ƒãˆå°½ãã‚‹ãã€‚ãã®å‹•æ‚¸ã¯ã€å¿ƒè‡“ã‹ã‚‰ã®æ‚²é³´ã ã€‚",
        subDesc: "ãã®ä¸Šã€<strong>ã€ç«ï¼ˆç„¦ã‚Šï¼‰ã€</strong>ã®è¦ç´ ã‚‚å¼·ã„ã€‚èª¿å­ã«ä¹—ã‚‹ã¨æ­¯æ­¢ã‚ãŒåŠ¹ã‹ãªããªã‚‹ã ã‚ï¼Ÿ å‹¢ã„ã ã‘ã§ç´„æŸã—ã¦ã€å¾Œã§å¾Œæ‚”ã™ã‚‹ç™–ã€ç›´ã—ãŸæ–¹ãŒã„ã„ãã€‚"
    },
    earth: {
        desc: "ã€ã§ã‚‚â€¦ã ã£ã¦â€¦ã€ã£ã¦ã€ãŠå‰ã®äººç”Ÿè¨€ã„è¨³ã°ã£ã‹ã ãªã€‚æ‚©ã¿ã™ãã¦èƒƒã«ç©´é–‹ã‘ã‚‹ã®ãŒè¶£å‘³ã‹ï¼Ÿ ãã®ãã›ç”˜ã„è“å­ã°ã£ã‹é£Ÿã£ã¦ã€æ€è€ƒã‚‚ä½“å‹ã‚‚ãƒ‰ãƒ­ãƒ‰ãƒ­ã«æº¶ã‘ã¦ã‚“ã ã‚ˆã€‚è¦‹ã¦ã‚‰ã‚“ãªã‚ã€‚",
        item: "èŠ‹ã¨ã‹ã‚«ãƒœãƒãƒ£é£Ÿã£ã¦ã€æ•£æ­©ã—ã‚ã€‚",
        yang: { title: "ğŸšœ é™½åœŸã®é ‘å›ºå²©ï¼šå‹•ã‹ã–ã‚‹å±±", img: "img/earth_yang.png" },
        yin:  { title: "ğŸ«  é™°åœŸã®æ²¼ï¼šå„ªæŸ”ä¸æ–­ãªå¦–æ€ª", img: "img/earth_yin.png" },
        chartComment: "ã€ŒåœŸï¼ˆè„¾ï¼‰ã€ãŒçªå‡ºã—ã¦ã‚‹ãªã€‚ã“ã‚Œã¯<strong>ã€Œæ‚©ã¿ã™ãã€ã¨ã€Œç³–åˆ†éå¤šã€ã®è¨¼æ˜æ›¸</strong>ã ã€‚èƒƒè…¸ãŒå¼±ã£ã¦ã€é£Ÿã¹ãŸã‚‚ã®ã‚’ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«å¤‰ãˆã‚‰ã‚Œã¦ãªã„ã€‚ã ã‹ã‚‰ã„ã¤ã‚‚ãƒ€ãƒ«ãã¦ã€æ€è€ƒãŒæ²¼ã®ã‚ˆã†ã«é‡ãŸã„ã‚“ã ã‚ˆã€‚",
        subDesc: "ã‚ã¨ã€æ ¹æœ¬çš„ã«<strong>ã€åœŸï¼ˆè¿·ã„ï¼‰ã€</strong>ã®æ°—è³ªãŒã‚ã‚‹ãªã€‚ä½•ã‹æ±ºã‚ã‚‹æ™‚ã«ã‚¦ã‚¸ã‚¦ã‚¸æ‚©ã‚“ã§æ™‚é–“ã‚’ç„¡é§„ã«ã™ã‚‹ã€‚ãã®å„ªæŸ”ä¸æ–­ã•ãŒã€å‘¨ã‚Šã‚’ã‚¤ãƒ©ã¤ã‹ã›ã¦ã‚‹ã“ã¨ã«æ°—ã¥ã‘ã€‚"
    },
    metal: {
        desc: "ãŠå‰ã®ã€æ­£è«–ã€ã¯æ­£ã—ã„ã‘ã©ã€æ¯è‹¦ã—ã„ã‚“ã ã‚ˆã€‚ç™½é»’ã¤ã‘ãªãã‚ƒæ°—ãŒæ¸ˆã¾ãªã„ãã®æ½”ç™–ã•ãŒã€å‘¨ã‚Šã®ç©ºæ°—ã¾ã§ä¹¾ç‡¥ã•ã›ã¦ã‚‹ã“ã¨ã«æ°—ã¥ã‘ã€‚ã‚«ã‚µã‚«ã‚µã®å¿ƒã§æ­£ã—ã•ã‚’æŒ¯ã‚Šã‹ã–ã—ã¦ã€ä½•ãŒæ¥½ã—ã„ã®ï¼Ÿ",
        item: "å¤§æ ¹ãŠã‚ã—é£Ÿã£ã¦ã€æ·±å‘¼å¸ã—ã‚ã€‚",
        yang: { title: "ğŸ¤– é™½é‡‘ã®å‡¦åˆ‘äººï¼šå†·å¾¹ãƒ­ãƒœãƒƒãƒˆ", img: "img/metal_yang.png" },
        yin:  { title: "ğŸ’ é™°é‡‘ã®å®çŸ³ï¼šã‚¬ãƒ©ã‚¹ã®ãƒãƒ¼ãƒˆ", img: "img/metal_yin.png" },
        chartComment: "ã€Œé‡‘ï¼ˆè‚ºï¼‰ã€ã®ã‚°ãƒ©ãƒ•ãŒå°–ã‚Šã™ãã ã€‚ãŠå‰ã¯è‡ªåˆ†ã«ã‚‚ä»–äººã«ã‚‚å³ã—ã™ãã‚‹ã€‚ãã®å®Œç’§ä¸»ç¾©ãŒã€<strong>å‘¼å¸ã‚’æµ…ãã—ã€è‚Œã‚’ä¹¾ç‡¥ã•ã›ã¦ã‚‹å…ƒå‡¶</strong>ã ã€‚æ­£ã—ã•ã§æ­¦è£…ã—ã¦ã‚‚ã€å¿ƒã¯ã‚«ã‚µã‚«ã‚µã®ã¾ã¾ã ãã€‚",
        subDesc: "åŠ ãˆã¦<strong>ã€é‡‘ï¼ˆé ‘å›ºï¼‰ã€</strong>ãªé¢ã‚‚è¦‹ãˆéš ã‚Œã™ã‚‹ã€‚å¤‰ãªã¨ã“ã§å‡ å¸³é¢ã¨ã„ã†ã‹ã€èé€šãŒåˆ©ã‹ãªã„ã ã‚ã€‚ãã®ã€Œè¬ã®ã“ã ã‚ã‚Šã€ã¯ã€ä»–äººã‹ã‚‰è¦‹ãŸã‚‰ãŸã ã®é¢å€’ãã•ã„å¥´ã ã€‚"
    },
    water: {
        desc: "çŸ³æ©‹ã‚’å©ãã™ãã¦å£Šã™ã‚¿ã‚¤ãƒ—ã ãªã€‚è³¢ã„ã¤ã‚‚ã‚Šã§ã„ã‚‹ã¿ãŸã„ã ãŒã€ãã‚Œã¯ãŸã ã®ãƒ“ãƒ“ãƒªã ã€‚è…¹ã®åº•ã§è¨ˆç®—ã°ã£ã‹ã—ã¦å†·ãˆåˆ‡ã£ã¦ã‚‹ã‹ã‚‰ã€å®Ÿå¹´é½¢ã‚ˆã‚Šè€ã‘è¾¼ã‚“ã§ã‚“ã ã‚ˆã€‚å­¤ç‹¬æ­»ä¸€ç›´ç·šã ãã€‚",
        item: "é»’è±†èŒ¶ã§ã‚‚é£²ã‚“ã§ã€æ¸©ã‚ã¨ã‘ã€‚",
        yang: { title: "ğŸŒŠ é™½æ°´ã®å¤§æ´¥æ³¢ï¼šç ´å£Šç¥", img: "img/water_yang.png" },
        yin:  { title: "â„ï¸ é™°æ°´ã®æ°·æŸ±ï¼šãƒ“ãƒ“ãƒªãªè€äºº", img: "img/water_yin.png" },
        chartComment: "ã€Œæ°´ï¼ˆè…ï¼‰ã€ãŒä»–ã‚’åœ§å€’ã—ã¦ã‚‹ãªã€‚ã“ã‚Œã¯è³¢ã•ã˜ã‚ƒãªã„ã€<strong>ã€Œææ€–ã€ã¨ã€Œå†·ãˆã€ãŒéª¨ã®é«„ã¾ã§æŸ“ã¿ä»˜ã„ã¦ã‚‹è¨¼æ‹ </strong>ã ã€‚ç”Ÿå‘½åŠ›ã®ã‚¿ãƒ³ã‚¯ãŒæ¯æ¸‡ã—ã¦ã‚‹ã‹ã‚‰ã€è€åŒ–ãŒåŠ é€Ÿã—ã¦ã‚‹ãã€‚ãƒŸã‚¤ãƒ©ã«ãªã‚ŠãŸã„ã®ã‹ï¼Ÿ",
        subDesc: "ãã‚Œã¨ã€éš ã—ãã‚Œã¦ã„ãªã„ã®ãŒ<strong>ã€æ°´ï¼ˆææ€–ï¼‰ã€</strong>ã®å¼±ã•ã ã€‚æ–°ã—ã„ã“ã¨ã‚’å‰ã«ã™ã‚‹ã¨ã€æ€¥ã«è…°ãŒå¼•ã‘ã¦é€ƒã’é“ã‚’æ¢ã™ã€‚ãƒªã‚¹ã‚¯ç®¡ç†ã¨è¨€ãˆã°èã“ãˆã¯ã„ã„ãŒã€å˜ãªã‚‹ãƒ“ãƒ“ãƒªã ã€‚"
    }
};

function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function startGame(type) {
    userYinYang = type;
    document.getElementById('scene-start').classList.remove('active');
    document.getElementById('scene-quiz').classList.add('active');
    document.getElementById('q-total').textContent = questions.length;
    showQuestion();
}

function showQuestion() {
    const q = questions[currentQIndex];
    const progressPercent = ((currentQIndex) / questions.length) * 100;
    document.getElementById('progress-bar').style.width = `${progressPercent}%`;
    document.getElementById('q-num').textContent = currentQIndex + 1;
    document.getElementById('q-text').innerHTML = q.text;
    const optionsArea = document.getElementById('options-area');
    optionsArea.innerHTML = '';
    const shuffledOptions = shuffle([...q.options]);
    shuffledOptions.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt.label;
        btn.onclick = () => answer(opt.type);
        optionsArea.appendChild(btn);
    });
}

function answer(type) {
    scores[type] += 1;
    currentQIndex++;
    if (currentQIndex < questions.length) {
        showQuestion();
    } else {
        document.getElementById('progress-bar').style.width = '100%';
        calcResult();
    }
}

function calcResult() {
    const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
    finalResultType = sortedScores[0][0];
    if (sortedScores[1] && sortedScores[1][1] > 0) {
        subResultType = sortedScores[1][0];
    } else {
        subResultType = null;
    }
    showResultScreen();
}

function showResultScreen() {
    document.getElementById('scene-quiz').classList.remove('active');
    document.getElementById('scene-result').classList.add('active');
    const data = resultData[finalResultType];
    const specific = (userYinYang === 'yang') ? data.yang : data.yin;
    document.getElementById('card-rarity').textContent = `ã€SSRã€‘${specific.title.split('ï¼š')[0]}`;
    document.getElementById('card-title').textContent = specific.title.split('ï¼š')[1];
    document.getElementById('card-char-img').src = specific.img; 
    document.getElementById('card-desc').textContent = data.desc;
    document.getElementById('card-lucky-item').textContent = data.item;
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// 3æ®µæ§‹ãˆåˆ†æ
function showChart() {
    document.getElementById('detail-area').style.display = 'block';
    document.getElementById('show-detail-btn').style.display = 'none';
    let yinYangText = (userYinYang === 'yang') 
        ? "<strong>ã€æ ¹æœ¬è¨ºæ–­ã€‘</strong><br>ãŠå‰ã€æœ€åˆã«ã€é™½ã€ã‚’é¸ã‚“ã ãªï¼Ÿ ãã‚Œã¯<strong>ã€è½ã¡ç€ãã®ãªã•ã€</strong>ã®è¡¨ã‚Œã ã€‚ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ç„¡é§„ã«å‚ã‚Œæµã—ã¦ã€å‘¨ã‚Šã‚’ç–²ã‚Œã•ã›ã¦ã‚‹è‡ªè¦šã‚’æŒã¦ã€‚<br><br>"
        : "<strong>ã€æ ¹æœ¬è¨ºæ–­ã€‘</strong><br>ãŠå‰ã€æœ€åˆã«ã€é™°ã€ã‚’é¸ã‚“ã ãªï¼Ÿ ãã‚Œã¯<strong>ã€æ ¹æš—ã§åŸ·å¿µæ·±ã„ã€</strong>è¨¼æ‹ ã ã€‚è…¹ã®åº•ã«è¨€è‘‰ã‚’æºœã‚è¾¼ã‚“ã§ã€å¾Œã§ãƒãƒãƒãƒæ€ã„å‡ºã™ã‚¿ã‚¤ãƒ—ã ã‚ã€‚<br><br>";
    let mainText = "<strong>ã€ãƒ¡ã‚¤ãƒ³å‚¾å‘ã€‘</strong><br>" + resultData[finalResultType].chartComment;
    let subText = subResultType ? "<br><br><strong>ã€éš ã‚ŒãŸæœ¬æ€§ã€‘</strong><br>" + resultData[subResultType].subDesc : "";
    document.getElementById('chart-comment').innerHTML = yinYangText + mainText + subText;

    const ctx = document.getElementById('radarChart').getContext('2d');
    if (window.myRadarChart) { window.myRadarChart.destroy(); }
    window.myRadarChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['æœ¨(è‚)', 'ç«(å¿ƒ)', 'åœŸ(è„¾)', 'é‡‘(è‚º)', 'æ°´(è…)'],
            datasets: [{
                label: 'å‚¾å‘',
                data: [scores.wood, scores.fire, scores.earth, scores.metal, scores.water],
                backgroundColor: 'rgba(201, 160, 99, 0.5)',
                borderColor: '#c9a063',
                borderWidth: 3,
                pointBackgroundColor: '#fff',
                pointBorderColor: '#c9a063'
            }]
        },
        options: {
            scales: {
                r: {
                    angleLines: { color: '#555' },
                    grid: { color: '#333', circular: true },
                    pointLabels: { color: '#ffd700', font: { size: 14, family: "'Reggae One'" } },
                    suggestedMin: 0, suggestedMax: 5,
                    ticks: { display: false, backdropColor: 'transparent' }
                }
            },
            plugins: { legend: { display: false } },
            animation: { duration: 2000, easing: 'easeOutQuart' }
        }
    });
    document.getElementById('detail-area').scrollIntoView({ behavior: 'smooth' });
}

// SNSã‚·ã‚§ã‚¢æ©Ÿèƒ½
function shareThreads() {
    const data = resultData[finalResultType];
    const specific = (userYinYang === 'yang') ? data.yang : data.yin;
    const title = specific.title.split('ï¼š')[1];
    const url = "https://hogushiyakida.com/diagnosis.html";
    const text = `ã€æ¯’èˆŒäº”è¡Œè¨ºæ–­ã€‘\nç§ã®æœ¬æ€§ã¯...ã€${title}ã€ã§ã—ãŸã€‚\n\n${data.desc.substring(0, 30)}...\n\n#æ¯’èˆŒäº”è¡Œè¨ºæ–­ #ã»ãã—ã‚„æœ¨ç”°\n`;
    window.open(`https://www.threads.net/intent/post?text=${encodeURIComponent(text + url)}`, '_blank');
}

function saveCardImage() {
    const target = document.getElementById('capture-target');
    html2canvas(target, { scale: 2, backgroundColor: "#1a1a1a" }).then(canvas => {
        const link = document.createElement('a');
        link.download = 'dokuzetsu_diagnosis.png';
        link.href = canvas.toDataURL();
        link.click();
        alert('ç”»åƒã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\nã‚¤ãƒ³ã‚¹ã‚¿ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ç­‰ã§ã‚·ã‚§ã‚¢ã—ã¦ã­ï¼');
    });
}

function copyLink() {
    const url = "https://hogushiyakida.com/diagnosis.html";
    navigator.clipboard.writeText(url).then(() => {
        alert('ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼\nå¥½ããªSNSã«è²¼ã‚Šä»˜ã‘ã¦ã‚·ã‚§ã‚¢ã—ã¦ã­ã€‚');
    });
}

function shareX() {
    const specific = (userYinYang === 'yang') ? resultData[finalResultType].yang : resultData[finalResultType].yin;
    const title = specific.title.split('ï¼š')[1];
    const url = "https://hogushiyakida.com/diagnosis.html";
    const text = `ã€æ¯’èˆŒäº”è¡Œè¨ºæ–­ã€‘ç§ã®æœ¬æ€§ã¯...ã€${title}ã€ã§ã—ãŸã€‚\n\nè¦šæ‚Ÿã‚’æ±ºã‚ã¦è¨ºæ–­ã™ã‚‹â†“`;
    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}&hashtags=æ¯’èˆŒäº”è¡Œè¨ºæ–­,ã»ãã—ã‚„æœ¨ç”°`;
    window.open(twitterUrl, '_blank');
}
</script>

</body>
</html>
